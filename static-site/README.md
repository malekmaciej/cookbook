# Static Website CookBook Chatbot

This is a static HTML/JavaScript implementation of the CookBook Chatbot that can be hosted on Amazon S3 with CloudFront. This replaces the expensive ECS + ALB infrastructure while maintaining all chatbot functionality.

## Architecture

- **Static Website**: HTML, CSS, JavaScript hosted on S3
- **CloudFront**: CDN for HTTPS and global distribution
- **AWS Cognito**: User authentication (Hosted UI)
- **AWS Bedrock**: AI model and Knowledge Base (accessed via AWS SDK for JavaScript)
- **MCP Server** (Optional): Recipe management via HTTP calls

## Cost Comparison

### Old Architecture (ECS + ALB):
- ECS Fargate: ~$30-50/month
- Application Load Balancer: ~$20-25/month
- NAT Gateway: ~$30-40/month per AZ
- **Total: ~$80-120/month** + Bedrock usage

### New Architecture (S3 + CloudFront):
- S3 Hosting: ~$0.50-2/month
- CloudFront: ~$1-5/month (with free tier)
- **Total: ~$1.50-7/month** + Bedrock usage

**Savings: ~$75-115/month (90%+ reduction)**

## Features

- ✅ Same chatbot functionality as Chainlit version
- ✅ AWS Bedrock integration with Knowledge Base
- ✅ Cognito authentication
- ✅ MCP Server support (optional)
- ✅ Responsive design
- ✅ Markdown formatting support
- ✅ Real-time chat interface
- ✅ Tool use support (for MCP integration)

## Files

- `index.html` - Main HTML structure
- `styles.css` - CSS styling for the chatbot interface
- `app.js` - Main JavaScript application logic
- `config.js` - Configuration file (generated by Terraform)

## Deployment

The static site is deployed via Terraform which:
1. Creates an S3 bucket configured for static website hosting
2. Uploads all website files to S3
3. Creates a CloudFront distribution with HTTPS
4. Configures Cognito for authentication
5. Generates the `config.js` file with proper resource IDs

See the main repository README for deployment instructions.

## Local Testing

To test locally:

1. Create a `config.js` file with your AWS resources:
```javascript
window.CONFIG = {
    region: 'us-east-1',
    cognito: {
        userPoolId: 'your-user-pool-id',
        userPoolWebClientId: 'your-client-id',
        identityPoolId: 'your-identity-pool-id',
        domain: 'your-cognito-domain.auth.us-east-1.amazoncognito.com'
    },
    bedrock: {
        knowledgeBaseId: 'your-kb-id',
        modelId: 'us.anthropic.claude-sonnet-4-20250514-v1:0'
    },
    mcpServerUrl: '' // Optional
};
```

2. Serve the files with a local web server:
```bash
python3 -m http.server 8000
```

3. Open `http://localhost:8000` in your browser

**Note**: Local testing requires proper CORS configuration in AWS services.

## Browser Compatibility

- Modern browsers with ES6 support
- AWS SDK for JavaScript v2
- Amazon Cognito Identity SDK

## Security

- All traffic over HTTPS (via CloudFront)
- Cognito authentication required
- AWS credentials obtained via Cognito Identity Pool
- No hardcoded secrets in code
